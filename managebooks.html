<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="./CSS/lendingbook.css" />
  <title>Book Inventory</title>
</head>
<body>
    <div id="navbar"></div>
        <div class="maincont">
            <div id="sidebar"></div>
            <div class="content">
                <div class="lend-head">
                    <h1>Book Inventory</h1>
                    <a href="./addingbook.html">Add New Book</a>
                </div>
                <div class="lend-cont">
                    <table>
                        <thead>
                            <tr>
                            <th>Book ID</th>
                            <th>Book Title</th>
                            <th>Genre</th>
                            <th>Author</th>
                            <th>Total Copies Available</th>
                            </tr>
                        </thead>
                        <tbody id="booksTableBody">
                          <tr>
                            <td>B001</td>
                            <td>The Great Gatsby</td>
                            <td>Fiction</td>
                            <td>F. Scott Fitzgerald</td>
                            <td>12</td>
                          </tr>
                          <tr>
                            <td>B002</td>
                            <td>A Brief History of Time</td>
                            <td>Science</td>
                            <td>Stephen Hawking</td>
                            <td>7</td>
                          </tr>
                          <tr>
                            <td>B003</td>
                            <td>Steve Jobs</td>
                            <td>Biography</td>
                            <td>Walter Isaacson</td>
                            <td>5</td>
                          </tr>
                          <tr>
                            <td>B004</td>
                            <td>1984</td>
                            <td>Classic</td>
                            <td>George Orwell</td>
                            <td>8</td>
                          </tr>
                          <tr>
                            <td>B005</td>
                            <td>The Alchemist</td>
                            <td>Fiction</td>
                            <td>Paulo Coelho</td>
                            <td>10</td>
                          </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

  <script>
    fetch('nav.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('navbar').innerHTML = data;
      });

    fetch('sidebar.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('sidebar').innerHTML = data;
      });
    
    document.getElementById('addBookForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const bookTitle = document.getElementById('bookTitle').value.trim();
    const author = document.getElementById('author').value.trim();
    const category = document.getElementById('category').value;
    const language = document.getElementById('language').value;
    const availableCopies = document.getElementById('availableCopies').value;
    const totalCopies = document.getElementById('totalCopies').value;
    const status = document.querySelector('input[name="status"]:checked').value;
    const features = document.getElementById('features').value;

    // Create a book object
    const newBook = {
      title: bookTitle,
      author: author,
      category: category,
      language: language,
      availableCopies: availableCopies,
      totalCopies: totalCopies,
      status: status,
      features: features,
    };

    const books = JSON.parse(localStorage.getItem('books')) || [];

    // Add the new book to array
    books.push(newBook);

    // Save back to localStorage
    localStorage.setItem('books', JSON.stringify(books));

    // Redirect to manage books page
    window.location.href = 'managebooks.html';
  });

  </script>
</body>
</html>
